# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è

## üîç –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–∫—Ä–∏–ø—Ç–∞

–°–∫—Ä–∏–ø—Ç **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∏ —Å–æ–∑–¥–∞–µ—Ç —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏** –≤—Å–µ—Ö –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ VPS:

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –°–£–ë–î:
- **PostgreSQL** (—Å–∏—Å—Ç–µ–º–Ω—ã–µ –∏ Docker)
- **MySQL/MariaDB** (—Å–∏—Å—Ç–µ–º–Ω—ã–µ –∏ Docker) 
- **MongoDB** (—Å–∏—Å—Ç–µ–º–Ω—ã–µ –∏ Docker)
- **Redis** (—Å–∏—Å—Ç–µ–º–Ω—ã–µ –∏ Docker)
- **SQLite** (—Ñ–∞–π–ª—ã –ø–æ –≤—Å–µ–π —Å–∏—Å—Ç–µ–º–µ)

### –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è:
- üñ•Ô∏è **–°–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã** - —Å–∫–∞–Ω–∏—Ä—É–µ—Ç –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ —Å–ª—É–∂–±—ã –°–£–ë–î
- üê≥ **Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã** - –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã —Å –ë–î
- üìÅ **SQLite —Ñ–∞–π–ª—ã** - –∏—â–µ—Ç .db, .sqlite, .sqlite3 —Ñ–∞–π–ª—ã

## 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–∞–∫–µ—Ç—ã
sudo apt-get update
sudo apt-get install postgresql-client mysql-client mongodb-clients redis-tools
```

## 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

```bash
# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É docker
sudo usermod -aG docker $USER

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å–µ—Å—Å–∏–∏ –∏–ª–∏ –ø–µ—Ä–µ–ª–æ–≥–∏–Ω
newgrp docker

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ Docker
docker ps
```

## 3. –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞

```env
# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Google Drive
DRIVE_FOLDER_ID=your_drive_folder_id

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è  
BACKUP_DIR=./backups
```

## 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Google Drive API

### Service Account (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ [Google Cloud Console](https://console.cloud.google.com/)
2. –°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç –∏ –≤–∫–ª—é—á–∏—Ç–µ Google Drive API
3. –°–æ–∑–¥–∞–π—Ç–µ Service Account:
   - "APIs & Services" > "Credentials"
   - "Create Credentials" > "Service Account"
4. –°–æ–∑–¥–∞–π—Ç–µ JSON –∫–ª—é—á –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–∞–∫ `service-account-key.json`
5. –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –ø–∞–ø–∫–æ–π –Ω–∞ Drive —Å email Service Account

## 5. –ó–∞–ø—É—Å–∫ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è (—Ç–µ—Å—Ç)

```bash
# –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è
python3 backup_script.py
```

–°–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—Å—Ç –æ—Ç—á–µ—Ç `discovery_report_YYYYMMDD_HHMMSS.json` —Å–æ –≤—Å–µ–º–∏ –Ω–∞–π–¥–µ–Ω–Ω—ã–º–∏ –ë–î.

## 6. –ß—Ç–æ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç —Å–∫—Ä–∏–ø—Ç

### –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
- –°–∫–∞–Ω–∏—Ä—É–µ—Ç `ps aux` –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –ë–î
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ—Ä—Ç—ã —á–µ—Ä–µ–∑ –∞–Ω–∞–ª–∏–∑ —Å–µ—Ç–µ–≤—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π  
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç –ø—É—Ç–∏ –∫ –¥–∞–Ω–Ω—ã–º –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

### Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—Å–µ –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
- –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø –ë–î –ø–æ –æ–±—Ä–∞–∑—É (postgres, mysql, mongo –∏ —Ç.–¥.)
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

### SQLite —Ñ–∞–π–ª—ã
- –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ –≤ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ SQLite
- –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

## 7. –ü—Ä–∏–º–µ—Ä—ã –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

### PostgreSQL –≤ Docker
```json
{
  "type": "postgresql",
  "source": "docker", 
  "container_name": "postgres_db",
  "credentials": {
    "user": "postgres",
    "password": "secret",
    "database": "myapp"
  },
  "databases": ["myapp", "analytics"]
}
```

### –°–∏—Å—Ç–µ–º–Ω—ã–π MySQL
```json
{
  "type": "mysql",
  "source": "system",
  "host": "localhost",
  "port": 3306,
  "databases": ["wordpress", "ecommerce"]
}
```

## 8. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

### Systemd —Å–µ—Ä–≤–∏—Å
```bash
sudo cp db-backup.service /etc/systemd/system/
sudo systemctl daemon-reload
sudo systemctl enable db-backup.service
sudo systemctl start db-backup.service
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```bash
sudo systemctl status db-backup.service
journalctl -u db-backup.service -f
```

## 9. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
tail -f backup.log

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ—Ç—á–µ—Ç–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è
cat backups/discovery_report_*.json | jq .

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π
ls -la backups/
```

## 10. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –î–æ—Å—Ç—É–ø –∫ –±–∞–∑–∞–º –¥–∞–Ω–Ω—ã—Ö
–°–∫—Ä–∏–ø—Ç –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ë–î –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏:
- –ë–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π)
- –° —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ Docker –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –° —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–º–∏ —É—á–µ—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (postgres/postgres, root –±–µ–∑ –ø–∞—Ä–æ–ª—è)

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ë–î

**PostgreSQL:**
```bash
# –í pg_hba.conf –¥–æ–±–∞–≤–∏—Ç—å:
local   all   postgres   trust
host    all   postgres   127.0.0.1/32   trust
```

**MySQL:**
```bash
# –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
CREATE USER 'backup'@'localhost' IDENTIFIED BY 'password';
GRANT SELECT, LOCK TABLES, SHOW VIEW, EVENT, TRIGGER ON *.* TO 'backup'@'localhost';
```

## 11. –ò—Å–∫–ª—é—á–µ–Ω–∏—è –∏ —Ñ–∏–ª—å—Ç—Ä—ã

### –ò—Å–∫–ª—é—á–∞–µ–º—ã–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
- **PostgreSQL**: template0, template1
- **MySQL**: information_schema, performance_schema, mysql, sys  
- **MongoDB**: admin, local, config

### –ò—Å–∫–ª—é—á–∞–µ–º—ã–µ SQLite —Ñ–∞–π–ª—ã:
- –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (-wal, -shm)
- –°–∏—Å—Ç–µ–º–Ω—ã–µ –∫—ç—à–∏ –±—Ä–∞—É–∑–µ—Ä–æ–≤
- –§–∞–π–ª—ã –º–µ–Ω—å—à–µ 1KB

## 12. –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ø–æ—Ä—Ç–æ–≤
netstat -tulpn | grep -E "(5432|3306|27017|6379)"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker ps --format "table {{.Names}}\t{{.Image}}\t{{.Ports}}"
```

### –û—à–∏–±–∫–∏ Docker API
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
groups $USER | grep docker

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Docker daemon
sudo systemctl status docker
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å Google Drive
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª—é—á–µ–π
ls -la service-account-key.json
cat service-account-key.json | jq .client_email
```

## 13. –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–∏—Å–∫–∞ SQLite
```python
# –í –∫–æ–¥–µ –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –ø—É—Ç–∏ –ø–æ–∏—Å–∫–∞:
search_paths = [
    '/var/lib',
    '/opt', 
    '/home',
    '/custom/path'  # –î–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π –ø—É—Ç—å
]
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
```python
# –ò–∑–º–µ–Ω–∏—Ç—å –≤ main():
schedule.every(15).minutes.do(backup_manager.run_full_backup)  # –ö–∞–∂–¥—ã–µ 15 –º–∏–Ω—É—Ç
schedule.every().hour.do(backup_manager.run_full_backup)       # –ö–∞–∂–¥—ã–π —á–∞—Å
schedule.every().day.at("02:00").do(backup_manager.run_full_backup)  # –ï–∂–µ–¥–Ω–µ–≤–Ω–æ –≤ 2:00
```

## 14. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ**: –ö–∞–∂–¥–∞—è –ë–î –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
- **–°–∂–∞—Ç–∏–µ**: PostgreSQL –∏—Å–ø–æ–ª—å–∑—É–µ—Ç custom —Ñ–æ—Ä–º–∞—Ç (—Å–∂–∞—Ç—ã–π)
- **–û—á–∏—Å—Ç–∫–∞**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ —Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π
- **–†–µ—Å—É—Ä—Å—ã**: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è CPU/–ø–∞–º—è—Ç–∏ —á–µ—Ä–µ–∑ psutil

–°–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–Ω–æ–º–Ω—É—é —Å–∏—Å—Ç–µ–º—É —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Å–µ—Ö –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ!
